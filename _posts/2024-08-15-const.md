---
title: "[E-Z] const λ¦¬λ·°ν•κΈ°π¨"
key: codereview
# category: tdd
tags: codereview
---
codereview
<!--more-->

# [E-Z] const λ¦¬λ·°ν•κΈ°π¨
μ €λ” μΆ…μΆ… λ‹¨μν• μƒμλ¥Ό μ¨μ•Όν•  λ• const, enum, inline λ“± μ—¬λ¬ κµ¬ν„ λ°©λ²•μ΄ μλ”λ°λ„ λ§¤ν¬λ΅λ¥Ό κ³§λ°”λ΅ νΈν•κ² μ“Έ λ•κ°€ λ§μµλ‹λ‹¤. ν•μ§€λ§ μ΄ λ•μ λ§¤ν¬λ΅μ λ‹¨μ μ€ λλ ·ν•κΈ΄ ν•μ£ . κ°€μ¥ λ¨Όμ € μƒκ°λ‚λ” κ²ƒμ€ μ«μ μƒμλ΅ λ€μ²΄λ μ½”λ“μ—μ„ μ»΄νμΌ μ—λ¬λΌλ„ λ°μƒν•λ©΄ ν—·κ°λ¦°λ‹¤λ” μ μ…λ‹λ‹¤.π™„  

## λ””λ²„κΉ…μ΄ μ‰¬μ΄ const
```cpp
#define PI 3.14
const double pi=3.14;
```

μ†μ¤μ½”λ“κ°€ μ»΄νμΌλ¬μ—κ² PIλ¥Ό μ•λ ¤μ£ΌκΈ° μ „μ—, μ„ ν–‰ μ²λ¦¬μκ°€ μ«μ μƒμλ΅ λ€μ²΄ν•΄λ²„λ¦¬λ―€λ΅ μ»΄νμΌλ¬λ” PIκ°€ μ•„λ‹λΌ 3.14λ΅ μΈμ‹ν•©λ‹λ‹¤. μ¦‰, PIλ” μ»΄νμΌλ¬μ κΈ°νΈ ν…μ΄λΈ”μ— λ“¤μ–΄κ°€μ§€ μ•μµλ‹λ‹¤. μ΄λ ‡κ² λλ©΄ λ§¤ν¬λ΅ μ‚¬μ© μ¤‘ μ¤λ¥κ°€ λ°μƒν•λ©΄, μ»΄νμΌλ¬μ μ—λ¬ λ©”μ‹μ§€κ°€ λ§¤ν¬λ΅ μΉν™μ— λ€ν• μ •λ³΄λ¥Ό μ κ³µν•μ§€ μ•κΈ° λ•λ¬Έμ— μ—λ¬μ μ›μΈμ„ μ¶”μ ν•κΈ° μ–΄λ µμµλ‹λ‹¤.  
κ·Έλμ„ λ‹¨μν• μƒμλ¥Ό μ“Έ λ•λ”, `λ§¤ν¬λ΅` λ€μ‹  `const κ°μ²΄`(λλ” enum)λ¥Ό μ“°λ” νΈμ΄ μΆ‹μµλ‹λ‹¤. `const λ³€μ`λ” μ‹¤μ  λ©”λ¨λ¦¬ μ„μΉμ— μ €μ¥λκΈ° λ•λ¬Έμ—, λ””λ²„κΉ… λ„κµ¬λ¥Ό μ‚¬μ©ν•μ—¬ λ³€μμ κ°’μ„ μ§μ ‘ ν™•μΈν•  μ μμµλ‹λ‹¤. μ΄λ” μ—λ¬λ¥Ό μ¶”μ ν•λ”λ° μ λ¦¬ν•©λ‹λ‹¤.   

λ‹¨μν• μƒμλ¥Ό μ •μν•λ”λ° λ§¤ν¬λ΅λ¥Ό μΌλ‹¤λ©΄, κ·Έ λ€μ‹ μ— λ””λ²„κΉ…μ— μ©μ΄ν• const λ³€μλ¥Ό μ¨λ³΄μλ” μ½”λ“λ¦¬λ·°λ¥Ό ν•  μ μκ² μµλ‹λ‹¤.  

## νƒ€μ… μ—λ¬λ¥Ό μ²΄ν¬ν•  μ μλ” const

```c
const int MAX_SIZE = 100;
int array[MAX_SIZE];
```

constλ” νƒ€μ…μ„ κ°–κΈ° λ•λ¬Έμ—, λ³€μμ νƒ€μ…κ³Ό κ°’μ μΌκ΄€μ„±μ„ λ³΄μ¥ν•©λ‹λ‹¤. μ»΄νμΌλ¬λ” νƒ€μ…κ³Ό κ΄€λ ¨λ μ¤λ¥λ¥Ό μ²΄ν¬ν•  μ μμµλ‹λ‹¤.


```c
#define MAX_SIZE 100
int array[MAX_SIZE];
```

λ§¤ν¬λ΅ μƒμλ” νƒ€μ…μ΄ μ—†κΈ° λ•λ¬Έμ—, λ§¤ν¬λ΅ μƒμμ™€ λ‹¤λ¥Έ νƒ€μ…μ κ°’μ΄ μ—°μ‚°μ— μ‚¬μ©λ  λ• νƒ€μ… κ΄€λ ¨ μ¤λ¥κ°€ λ°μƒν•μ§€ μ•μµλ‹λ‹¤.  


## μ¤μ½”ν”„ λ‚΄μ—μ„ μ ν¨ν• const
```c
const int MAX_SIZE = 100;

void function() {
    int array[MAX_SIZE];
    // `const` λ³€μ MAX_SIZEλ” νƒ€μ…μ΄ λ…ν™•ν•κ³ , μ¤μ½”ν”„κ°€ μ ν•λ¨
}
```


const λ³€μλ” μ¤μ½”ν”„ λ‚΄μ—μ„λ§ μ ν¨ν•λ―€λ΅, μ „μ—­μ μΌλ΅ μ‚¬μ©λλ” λ§¤ν¬λ΅μ— λΉ„ν•΄ μ΄λ¦„ μ¶©λμ κ°€λ¥μ„±μ΄ μ μµλ‹λ‹¤. μ΄ λ•, μƒμκ°€ ν•„μ”ν• μ¤μ½”ν”„ λ‚΄μ—μ„λ§ μ„ μ–Έλμ—λ”μ§€ κ²€ν† ν•΄λ³Ό μ μμµλ‹λ‹¤.       

```c
#define MAX_SIZE 100

void function() {
    int array[MAX_SIZE];
    // λ§¤ν¬λ΅ μƒμ MAX_SIZEκ°€ λ³€κ²½λλ©΄, λ¨λ“  μ‚¬μ© μ½”λ“μ— μν–¥μ„ λ―ΈμΉ¨
}
```

λ°λ€λ΅ λ§¤ν¬λ΅λ” μ „μ—­μ μΌλ΅ μ ν¨ν•κΈ° λ•λ¬Έμ—, μ΄λ¦„ μ¶©λμ΄λ‚ μμƒμΉ λ»ν• λ™μ‘μ„ μ΄λν•  μ μμµλ‹λ‹¤. μ „μ—­μ μΌλ΅ μ ν¨ν•λ‹¤λ” νΉμ„±μ„ μ΄μ©ν•΄μ„ ν¨μ¨μ μΌλ΅ μ½”λ“λ¥Ό κµ¬μ„±ν•  λ•λ„ μμ§€λ§, μ΄λ¦„ μ¶©λμ— λ€ν• λ¦¬μ¤ν¬λ” μμµλ‹λ‹¤. λ°λ“μ‹ ν•„μ”ν• κ²½μ°κ°€ μ•„λ‹λΌλ©΄, λ¶ν•„μ”ν• μ „μ—­μ„ μ–Έμ„ ν”Όν•κ³  const λ³€μλ¥Ό μ“Έ μ μλ„λ΅ λ¦¬λ·°ν•  μ μμµλ‹λ‹¤.  


## μ½”λ“ κ°€λ…μ„±μ„ λ†’μ΄λ” const
constλ” κ°λ°μμ μλ„κ°€ λ¶„λ…ν•κ² λ…Ήμ•„ μμµλ‹λ‹¤. const ν‚¤μ›λ“κ°€ λ¶™μ€ κ°μ²΄λ” μ™Έλ¶€ λ³€κ²½μ΄ μ•λκ³ , μ΄λ¥Ό `μλ―Έμ μΈ μ μ•½`μ΄λΌκ³  ν•©λ‹λ‹¤. μ΄λ¬ν• μλ―Έμ μΈ μ μ•½μ„ μ†μ¤ μ½”λ“ μμ¤€μ—μ„ λ¶™μ΄κ³ , μ»΄νμΌλ¬κ°€ μ μ•½μ„ μ§€μΌμ¤λ‹λ‹¤. ν• λ§λ””λ΅, μ–΄λ–¤ κ°’μ΄ λ¶λ³€μ΄μ–΄μ•Ό ν•λ‹¤λ” μ μ‘μμ μλ„λ¥Ό μ»΄νμΌλ¬μ™€ λ‹¤λ¥Έ ν”„λ΅κ·Έλλ¨Έμ™€ λ‚λ μ μλ” μλ‹¨μ…λ‹λ‹¤. `μ½”λ“ κ°€λ…μ„±`μΈ΅λ©΄μ—μ„ μ†κ°ν–μ§€λ§, μ΄ μλ―Έμ μΈ μ μ•½μ—λ” `μλ„μΉ μ•μ€ λ²„κ·Έ λ°©μ§€`, `λ†’μ€ μ μ§€λ³΄μμ„±`, `μ£Όμ„ μ—†μ΄ λ¶λ³€μ„± λ…μ‹` λ“±μ„ μ „λ¶€ λ‚΄ν¬ν•κ³  μμµλ‹λ‹¤.  

μ΄λ¬ν• μ μ„ μ μν•λ‹¤λ©΄ μ²«μ§Έ, λ³€μμ λ¶λ³€μ„±μ„ ν™•μΈν•λ©΄μ„ const λ³€μλ¥Ό λ¦¬λ·°ν•  μ μμµλ‹λ‹¤.
```c
const x = 10;
x = 20; // μ¤λ¥ λ°μƒ
```

λ‘μ§Έ, μƒμλ΅ μ„ μ–Έλ λ³€μλ“¤μ΄ μ‹¤μ λ΅ λ³€κ²½λμ§€ μ•μ•„μ•Ό ν•λ” κ°’λ“¤μΈμ§€ κ²€ν† ν•©λ‹λ‹¤. μ¦‰, λ³€μμ λ¶λ³€μ„±μ΄ λ…Όλ¦¬μ μΌλ΅ λ§λ”μ§€ ν™•μΈν•©λ‹λ‹¤.
```c
const MAX_USERS = 100; // μƒμλ΅ μ μ 
const userName = 'John'; // μƒμλ΅ μ μ 
```

κ°μ²΄λ‚ λ°°μ—΄μ„ constλ΅ μ„ μ–Έν• κ²½μ°, ν•΄λ‹Ή κ°μ²΄λ‚ λ°°μ—΄μ μ”μ†λ” λ³€κ²½ν•  μ μμ§€λ§ λ³€μ μμ²΄λ¥Ό μ¬ν• λ‹Ήν•  μ μ—†μµλ‹λ‹¤. μ΄ μ μ„ μ΄ν•΄ν•κ³  μ μ ν μ‚¬μ©λκ³  μλ”μ§€ λ¦¬λ·°ν•©λ‹λ‹¤.
```c
const arr = [1, 2, 3];
arr[2] = 4; // κ°€λ¥
arr = [1, 2, 3, 4]; // μ¤λ¥ λ°μƒ
```



μƒμ ν¬μΈν„°λ¥Ό μ •μν•  λ• const μ“°μ  
ν¬μΈν„°μ™€ ν¬μΈν„°κ°€ κ°€λ¦¬ν‚¤λ” λ€μƒ λ‘ λ‹¤ constλ΅ μ„ μ–Έν•λ‹¤.  
```cpp
const char* const name = "Larvine Kim"; //const std::string name = "Larvine Kim";
```

`caution`{:.warning} ν΄λμ¤ μƒμλ¥Ό μ •μν•  λ• μƒμμ μ‚¬λ³Έ κ°μλ¥Ό 1κ°λ΅ μ •ν•κ³  μ‹¶λ‹¤λ©΄ static memberλ΅ λ§λ“¤μ  
```cpp
class GamePlayer{
    private:
        static const int numTurns = 5; //μ„ μ–Έ
        int scores[numTurns];
}
```

`caution`{:.warning} static memberλ΅ λ§λ“¤μ–΄μ§€λ” μ •μλ¥ νƒ€μ…(κ°μΆ… μ •μνƒ€μ…, char, bool λ“±)μ ν΄λμ¤ λ‚΄λ¶€ μƒμλ” μ„ μ–Έλ§ ν•΄λ„ λλ‹¤!  
λ‹¨, ν΄λμ¤ μƒμμ μ£Όμ†λ¥Ό κµ¬ν•λ” κ²½μ°, μ»΄νμΌλ¬κ°€ μ •μλ¥Ό ν•΄λΌκ³  ν•λ” κ²½μ°μ—λ” λ³„λ„λ΅ μ •μν•΄μ•Ό ν•λ‹¤.  

```cpp 
const int GamePlayer::numTurns; //μ •μ
```
ν΄λμ¤ μƒμλ” μ„ μ–Έν•  λ• μ΄κΈ°ν™”ν•λ―€λ΅ μ •μν•  λ•λ” κ°’μ„ μ£Όμ§€ μ•λ”λ‹¤. μ΄ λ•, μ¤λλ μ»΄νμΌλ¬ μ¤‘ λ°λ€λ΅ static ν΄λμ¤ λ©¤λ²„κ°€ μ„ μ–Έν•  λ• μ΄κΈ°κ°’μ„ μ¤μ„λ” μ•λλ‹¤κ³  ν•λ” κ²½μ°λ„ μμΌλ‹, 
μ΄ λ•λ” λ°λ€λ΅ ν•λ‹¤. μ΄μ— λ€ν• ν•΄κ²°μ±…μΌλ΅ `λ‚μ—΄μ λ‘”κ°‘μ (enum hack)`μ΄ μλ‹¤.      

`caution`{:.warning} #defineλ” ν΄λμ¤ μƒμλ¥Ό μ •μν•λ”λ° μ“Έ μ μ—†κ³ , private λ“± μΊ΅μν™”λ„ μ•λλ‹¤.  


constλ” μ–΄λ–¤ μ ν¨ λ²”μ„μ— μλ” κ°μ²΄μ—λ„ λ¶™μ„ μ μκ³ , ν•¨μ λ§¤κ°λ³€μ, λ°ν™νƒ€μ…, λ©¤λ²„ν•¨μ λ“±μ— λ¶™μ„ μ μλ‹¤.  
{:.info}
- μ¤λ¥ΈνΈμ„ κΎΈλ©°μ¤€λ‹¤κ³  μ—¬κΈ°μ.

###### 01. ν¬μΈν„°

```cpp
char str[] = "string";
char *p = a; //λΉ„μƒμ ν¬μΈν„°, λΉ„μƒμ λ°μ΄ν„°
const char *p = a; //λΉ„μƒμ ν¬μΈν„°, μƒμ λ°μ΄ν„°
char* const p = a; //μƒμ ν¬μΈν„°, λΉ„μƒμ λ°μ΄ν„°
const char* const p = a; //μƒμ ν¬μΈν„°, μƒμ λ°μ΄ν„°
void f1(const Widget *pw); //μƒμ Widget κ°μ²΄μ— λ€ν• ν¬μΈν„°
void f2(Widget const *pw); //μƒμ Widget κ°μ²΄μ— λ€ν• ν¬μΈν„° == const Widget *
```

###### 02. STL λ°λ³µμ(iterator)
STL λ°λ³µμλ” ν¬μΈν„°λ¥Ό λ³Έλ¬ κ²ƒμ΄μ–΄μ„ κΈ°λ³Έμ μΌλ΅ T* μ™€ λΉ„μ·ν•κ² λ™μ‘ν•λ‹¤. (T* const: μƒμ ν¬μΈν„°, λΉ„μƒμ λ°μ΄ν„°)  
λ°λ³µμλ” μμ‹ μ΄ κ°€λ¦¬ν‚¤λ” λ€μƒμ΄ μ•„λ‹ κ²ƒμ„ κ°€λ¦¬ν‚¤λ” κ²½μ°κ°€ ν—μ©λμ§€ μ•λ”λ‹¤. (ν¬μΈν„° λ³€κ²½ X)  
λ€μ‹  λ°λ³µμκ°€ κ°€λ¦¬ν‚¤λ” λ€μƒ μμ²΄λ¥Ό λ³€κ²½ν•  μλ” μλ‹¤.  

`issue`{:.error} λ³€κ²½ λ¶κ°€λ¥ν• κ°μ²΄λ¥Ό κ°€λ¦¬ν‚¤λ” λ°λ³µμκ°€ ν•„μ”ν•λ‹¤λ©΄?  
`Solution`{:.success} const_iterator λ¥Ό μ‚¬μ©ν•λ‹¤. (const T*: λΉ„μƒμ ν¬μΈν„°, μƒμ λ°μ΄ν„°)  

```cpp
std::vector<int> vec;
const std::vector<int>::iterator iter = vec.begin();
*iter = 10; 
++iter; //error

const std::vector<int>::const_iterator cIter = vec.begin();
*cIter = 10; //error
++cIter;
```

###### 03. ν•¨μ μ„ μ–Έ
ν•¨μλ¥Ό constλ΅ μ„ μ–Έν•λ©΄ μΆ‹μ€ μ μ€ μ‚¬μ©μ μ •μ νƒ€μ…μ„ μ‚¬μ©ν•  λ• μ‹¤μν•μ§€ μ•μ„ μ μλ‹¤λ” μ μ΄λ‹¤.  
μ‚¬μ©μ μ •μ νƒ€μ…μ„ μ‚¬μ©ν•λ©΄, κΈ°λ³Έ νƒ€μ…κ³Ό μ“Έλ°μ—†μ΄ λΉ„νΈν™μ„±μ„ ν•μ§€ μ•λ„λ΅ ν•΄μ£Όλ” νΉμ§•μ΄ μλ‹¤.  
```cpp
Widget a, b, c;
//μ“Έλ°μ—†μ΄ λΉ„νΈν™μ„±μ„ ν•μ§€ μ•λ„λ΅ ν•΄μ£Όλ” νΉμ§•λ•λ¬Έμ— ν—μ©λλ” κ²ƒμ΄ λ¬Έμ λ‹¤.
if (a * b = c){ //λΉ„κµν•λ ¤κ³  ν–μ—λ”λ°, λ€μ…ν•΄λ²„λ Έλ‹¤.  
    ...
}
```

###### 04. λ§¤κ°λ³€μ

###### 05. μƒμ λ©¤λ²„ ν•¨μ: ν•΄λ‹Ή λ©¤λ²„ ν•¨μκ°€ μƒμ κ°μ²΄μ— λ€ν•΄ νΈμ¶λ  ν•¨μμ΄λ‹¤. (ex: auto func() const -> void)
* ν΄λμ¤μ μΈν„°νμ΄μ¤λ¥Ό μ΄ν•΄ν•κΈ° μ‰½λ‹¤.  
  * ν΄λμ¤λ΅ λ§λ“¤μ–΄μ§„ κ°μ²΄λ¥Ό λ³€κ²½ν•  μ μλ” ν•¨μμ™€ λ³€κ²½ν•  μ μ—†λ” ν•¨μλ¥Ό μ‚¬μ©μκ°€ λ―Έλ¦¬ μ• μ μλ‹¤.  
* μƒμ κ°μ²΄λ¥Ό μ‚¬μ©ν•  μ μκ² ν•λ‹¤.
  * μƒμ κ°μ²΄μ— λ€ν• μ°Έμ΅°μλ΅ κ°μ²΄λ¥Ό μ „λ‹¬ν•λ©΄ μ„±λ¥μ— μ λ¦¬ν•λ‹¤. 
  * μƒμ λ§¤κ°λ³€μλ¥Ό μ΅°μ‘ν•  μ μλ” const λ©¤λ²„ ν•¨μκ°€ ν•„μ”ν•λ‹¤. 


λ…Όλ¦¬μ μΈ μƒμμ„±μ„ μ‚¬μ©ν•΄μ„ ν”„λ΅κ·Έλλ°ν•λ‹¤.  
μƒμ λ©¤λ²„μ™€ λΉ„μƒμ λ©¤λ²„ ν•¨μκ°€ κΈ°λ¥μ μΌλ΅ μ„λ΅ λ‘κ°™μ΄ κµ¬ν„λμ–΄ μλ‹¤λ©΄, μ½”λ“ μ¤‘λ³µμ„ ν”Όν•λ” κ²ƒμ΄ μΆ‹λ‹¤. 
μ΄ λ•, λΉ„μƒμ λ²„μ „μ΄ μƒμ λ²„μ „μ„ νΈμ¶ν•λ„λ΅ ν•μ.  


`const`μ™€ λ§¤ν¬λ΅λ” κ°κ° μ¥λ‹¨μ μ΄ μμΌλ©°, `const`λ” νƒ€μ… μ•μ „μ„±κ³Ό λ””λ²„κΉ… μ©μ΄μ„±, μ¤μ½”ν”„ κ΄€λ¦¬ λ©΄μ—μ„ λ§¤ν¬λ΅λ³΄λ‹¤ μ°μν• κ²½μ°κ°€ λ§μµλ‹λ‹¤. λ§¤ν¬λ΅λ” κ°„λ‹¨ν• μƒμ κ°’μ„ μ •μν•  λ• μ μ©ν•μ§€λ§, νƒ€μ… κ²€μ‚¬κ°€ μ—†κ³  λ””λ²„κΉ…μ΄ μ–΄λ ¤μ΄ μ μ΄ μμµλ‹λ‹¤. λ”°λΌμ„ ν„λ€ C μ½”λ“μ—μ„λ” κ°€λ¥ν• ν• `const`λ¥Ό μ‚¬μ©ν•λ” κ²ƒμ΄ μΆ‹μµλ‹λ‹¤. `const`λ” μ½”λ“μ μλ„λ¥Ό λ…ν™•ν ν•κ³ , μ»΄νμΌ νƒ€μ„μ— νƒ€μ… μ²΄ν¬λ¥Ό ν†µν•΄ μ¤λ¥λ¥Ό μ‚¬μ „μ— λ°©μ§€ν•λ” λ° λ„μ›€μ΄ λ©λ‹λ‹¤.